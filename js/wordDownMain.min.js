var opname="GameWordDown";var score_config=[{max:0,min:null,basescore:0,increase:0,imagedir:"200-399",imagename:"3.png"},{max:4,min:1,basescore:200,increase:49,imagedir:"200-399",imagenum:8},{max:9,min:5,basescore:250,increase:49,imagedir:"200-399",imagenum:8},{max:14,min:10,basescore:300,increase:49,imagedir:"200-399",imagenum:8},{max:19,min:15,basescore:350,increase:49,imagedir:"200-399",imagenum:8},{max:24,min:20,basescore:400,increase:24,imagedir:"400-424",imagenum:6},{max:29,min:25,basescore:425,increase:24,imagedir:"425-499",imagenum:4},{max:34,min:30,basescore:450,increase:24,imagedir:"425-499",imagenum:4},{max:39,min:35,basescore:500,increase:24,imagedir:"500-599",imagenum:5},{max:44,min:40,basescore:525,increase:24,imagedir:"500-599",imagenum:5},{max:49,min:45,basescore:550,increase:24,imagedir:"500-599",imagenum:5},{max:54,min:50,basescore:575,increase:24,imagedir:"500-599",imagenum:5},{max:64,min:55,basescore:600,increase:9,imagedir:"600-709",imagenum:7},{max:74,min:65,basescore:610,increase:9,imagedir:"600-709",imagenum:7},{max:84,min:75,basescore:620,increase:9,imagedir:"600-709",imagenum:7},{max:94,min:85,basescore:630,increase:9,imagedir:"600-709",imagenum:7},{max:104,min:95,basescore:640,increase:9,imagedir:"600-709",imagenum:7},{max:114,min:105,basescore:650,increase:9,imagedir:"600-709",imagenum:7},{max:124,min:115,basescore:660,increase:9,imagedir:"600-709",imagenum:7},{max:134,min:125,basescore:670,increase:9,imagedir:"600-709",imagenum:7},{max:144,min:135,basescore:680,increase:9,imagedir:"600-709",imagenum:7},{max:199,min:145,basescore:690,increase:9,imagedir:"600-709",imagenum:7},{max:299,min:200,basescore:700,increase:9,imagedir:"600-709",imagenum:7},{max:null,min:300,basescore:710,increase:0,imagedir:"710",imagenum:3}];var wordListNum=2;var examType="cet4";var examDesc="四级";var scoreZone="";var tapDownTime="";var tapDownFirst=true;var tapCrazyTimes=0;var overDoneAll=false;function GameContainer(a,b){this.beforeInit();this.init(a,b);console.log(this)}GameContainer.prototype={type:"game-container",curLevel:0,levelsDesc:["bicycle","car","rocket"],maxLevel:3,curLevelNum:5,maxId:0,rightWord:0,init:function(a,b){this.id=a;this.widgetTypes=new Array();this.widgetList=new Array();this.curWord=undefined;this.curTopic=undefined;this.topics=b;this.maxColls=3;this.timerIntvl=700;this.timerId="";this.curTopicStartTime=0;this.continueRightTime=0;this.DoneWordList=[];this.wrongTopic=[];this.gameStatus="playing";this.nextFiveTopics=[];this.gameStart()},addPauseBtn:function(){var a=this;a.getElement().find("#game-tips").append("<div class='pause-controller'></div>");$(".pause-controller").bind("tapone",function(c){var b=c||window.event;b.preventDefault();b.stopPropagation();if(a.gameStatus=="playing"){a.pause()}else{a.resume()}})},getPauseBtn:function(){return $(".pause-controller")},removePauseBtn:function(){this.getPauseBtn().remove()},changePauseBtnStyle:function(a){this.getPauseBtn().attr("class","pause-controller");this.getPauseBtn().addClass(a)},beforeInit:function(){var a=$(window);var b=$("#game-container");var j=$("#manuZone");var f=a.width();var e=a.height();var g=e-100;var h=e-144;b.height(g);b.width(f);j.width(f);j.height(h);var i=g/rows;var d=40;if(g>400){d+=((g-400)/30)}while(i<=d){rows-=1;i=g/rows}if(b.find("#game-tips").length==0){var c="<div id='game-tips'><div class='wordNumberWrapper'><img src='http://baicizhan.qiniucdn.com/games/worddown/img/topBar/top.png' height='50px'/><div class='rightWordNumber'>0</div><div class='rightWordNumber2'>0</div></div></div>";b.append(c)}},removeWidget:function(b){var c=this.widgetList;this.widgetList=new Array();for(var a in c){if(b==c[a]){continue}this.widgetList.push(c[a])}b.removeElement()},decreaseLevel:function(){var a=this;var b=a.curLevel;b-=1;if(b<0){b=0}a.curLevel=b;gameContainer.setLevel(a.curLevel)},increaseLevel:function(){var a=this;var b=a.curLevel;b+=1;if(b>a.maxLevel){b=a.maxLevel}a.curLevel=b;gameContainer.setLevel(a.curLevel)},addWidget:function(a){this.widgetList.push(a)},showTopic:function(c){var b=this;b.initNextFiveTopics();var d=new Date();b.curTopicStartTime=d.getTime();var e="";if(b.wrongTopic.length!=0){$(".wrong-word-title").css("visibility","visible");var a=b.wrongTopic[b.wrongTopic.length-1];e+="<dl class='wrong-word'>                <dt class='wrong-word-text'>"+a.topicContent.word+"</dt>                <dd class='wrong-word-mean'>"+a.topicContent.wordMean+"</dd>              </dl>"}$(".wrong-word-content").html(e);this.showWordAndOptions(c);this.appendAudio(c);b.verticalMiddle()},showWordAndOptions:function(b){var j=this;var c=gen_random_serials(0,3,3,[]);var d=rows-1;var i=new Option(j);if(c[0]==0){i.setContent(b.topicContent.wordMean);i.isAnswer=true}else{if(c[0]==1){i.setContent(b.topicContent.optionMean1)}else{i.setContent(b.topicContent.optionMean2)}}i.showContent();i.setPosition(0,d);var h=new Option(this);if(c[1]==0){h.setContent(b.topicContent.wordMean);h.isAnswer=true}else{if(c[1]==1){h.setContent(b.topicContent.optionMean1)}else{h.setContent(b.topicContent.optionMean2)}}h.showContent();h.setPosition(1,d);var f=new Option(this);if(c[2]==0){f.setContent(b.topicContent.wordMean);f.isAnswer=true}else{if(c[2]==1){f.setContent(b.topicContent.optionMean1)}else{f.setContent(b.topicContent.optionMean2)}}f.showContent();f.setPosition(2,d);this.addWidget(i);this.addWidget(h);this.addWidget(f);var a=new Word(this,b.topicId);a.setContent(b.topicContent.word);a.getElement().append();a.hideContent();var e=1;var g=this.wrongTopic.length;a.setPosition(e,g);this.curWord=a},appendAudio:function(c){var b=this;if($("#"+c.topicId).length==0){$("body").append("<audio id='"+c.topicId+"' src='"+getRealPath(c.resourcesPath,c.topicContent.wordAudioURL)+"'></audio>")}$("#"+c.topicId).trigger("play");for(var a=0;a<b.nextFiveTopics.length;a++){var d=b.nextFiveTopics[a];if($("#"+d.topicId).length==0){if($("[played]").length==0){$("body").append("<audio id='"+d.topicId+"' src='"+getRealPath(d.resourcesPath,d.topicContent.wordAudioURL)+"'></audio>")}else{var e=$("[played]")[0];e=$(e);e.attr("id",d.topicId);e.attr("src",getRealPath(d.resourcesPath,d.topicContent.wordAudioURL));e.removeAttr("played");e.removeAttr("loaded")}}}},gameStart:function(){var a=this;this.addPauseBtn();a.curTopic=a.topics.pop();a.showTopic(a.curTopic);a.setLevel(a.curLevel);oldHighScore=TopParent.callTop("get_high_score","");$(".highScore-num").html(oldHighScore)},initNextFiveTopics:function(){var b=this;var g=[];var f=b.topics.length;var c=f>5?5:f;for(var a=0;a<c;a++){g[a]={};var e=b.topics[f-a-1];if(defined(e)){for(var d in e){g[a][d]=e[d]}}}b.nextFiveTopics=g},replay:function(){$(".latest-topic").html("");$(".rightWordNumber").html("0");$(".pause-controller").attr("class","pause-controller");if(this.timerId!=""){clearInterval(this.timerId);this.timerId=""}if(this.curWord){this.curWord.removeElement();this.curWord=undefined}this.curLevel=0;this.rightWord=0;this.widgetList.forEach(function(a){a.removeElement()});this.widgetList=[];this.wrongTopic=[];this.DoneWordList=[];this.gameStart()},checkResultRight:function(d,c){var a=this;a.continueRightTime+=1;a.rightWord+=1;console.log(a.rightWord);a.clearInterval();a.curWord.showContent();a.curWord.getElement().addClass("option-selected-right");$(".rightWordNumber").html(a.rightWord);if(a.topics.length==0){a.pause();overDoneAll=true;setTimeout(function(){a.removePauseBtn();a.showReport()},500);return}var b=setTimeout(function(){c.forEach(function(g){a.removeWidget(g)});a.curWord.removeElement();a.curTopic=a.topics.pop();a.showTopic(a.curTopic);var f=a.wrongTopic.length+a.rightWord;var e=parseInt(f/a.curLevelNum);if(e>a.maxLevel){e=a.maxLevel}if(e<0){e=0}a.curLevel=e;a.setLevel(a.curLevel);window.clearTimeout(b);b=""},100)},checkResultWrong:function(d,c){var a=this;a.curWord.getElement().addClass("option-selected-wrong");a.curWord.showContent();a.continueRightTime=0;a.clearInterval();if(a.topics.length==0){a.pause();overDoneAll=true;setTimeout(function(){a.removePauseBtn();a.showReport()},500);return}var b=setTimeout(function(){c.forEach(function(g){g.wrongHtml();if(a.wrongTopic.length!=rows-1){g.setPosition(g.getPosition().x,a.wrongTopic.length)}});a.wrongTopic.push(a.curTopic);a.curWord.removeElement();if(!a.checkGameOver()){a.curTopic=a.topics.pop();a.showTopic(a.curTopic);var f=a.wrongTopic.length+a.rightWord;var e=parseInt(f/a.curLevelNum);if(e>a.maxLevel){e=a.maxLevel}if(e<0){e=0}a.curLevel=e;a.setLevel(a.curLevel)}else{if(a.DoneWordList.length!=0){TopParent.callTop("set_topic_results",JSON.stringify(a.DoneWordList));a.DoneWordList=[]}if(a.rightWord>oldHighScore){TopParent.callTop("set_high_score",a.rightWord)}setTimeout(function(){a.removePauseBtn();a.showReport();a.clearInterval()},500)}window.clearTimeout(b);b="";c.forEach(function(g){g.getElement().html("")})},200)},showReport:function(){var m=this;var b=m.rightWord;var i=m.wrongTopic;var l=$(".rightWordNumber2").html();$(".mycontainer").css("display","none");$("#playGround").css("display","none");var k=score_config[0];var h=score_config[score_config.length-1];var c="http://baicizhan.qiniucdn.com/games/worddown/img/result/";if(b<=k.max){$(".resultMain img").attr("src",c+k.imagedir+"/"+k.imagename);$(".resultFenShu").html(k.basescore);scoreZone=k.max}else{if(b>=h.min){var d=c+h.imagedir+"/"+Math.floor(Math.random()*h.imagenum)+".png";var f=h.basescore;scoreZone="max";if(overDoneAll){d=c+"overdone-0.jpg";$(".resultMain img").attr("src",d);$(".resultFenShu").html("&nbsp;")}else{$(".resultMain img").attr("src",d);$(".resultFenShu").html(f)}}else{$.each(score_config,function(n,o){if(b>=o.min&&b<=o.max){var q=c+o.imagedir+"/"+Math.floor(Math.random()*o.imagenum)+".png";var p=parseInt((o.increase+1)*Math.random())+o.basescore;scoreZone=[o.min,o.max].join("_");$(".resultMain img").attr("src",q);$(".resultFenShu").html(p);return false}})}}var a=new Date();var j="2015-05-16 12:00:00";var g=new Date(j.replace(/\-/g,"/"));if(a==g){$(".resultMain img").attr("src",c+"another.png")}$("#report").css("display","block");$(".rightNum").html(b);$(".insistTime").html(l);$(".list").bind("click touchstart",function(o){var n=o||window.event;n.preventDefault();n.stopPropagation()});sendStatAjaxRequest(opname,"showreport"+examType);sendStatAjaxRequest(opname,"showreport"+examType+scoreZone.replace("-","_"));var e={title:"我在百词斩的单词速降游戏中得了"+$(".resultFenShu").html()+"分，你也来玩吧！",link:window.location.href,imgUrl:"http://baicizhan.qiniucdn.com/games/worddown/img/title300.jpg?23123",success:function(){sendStatAjaxRequest(opname,"WXSuccess"+examType)},cancel:function(){sendStatAjaxRequest(opname,"WXCancel"+examType)}};wx.onMenuShareTimeline(e);e.desc="用百词斩突击单词，分数涨涨涨！";wx.onMenuShareAppMessage(e);$("#replay").bind("tapone",function(n){sendStatAjaxRequest(opname,"Replay"+examType);if(overDoneAll){window.location.href=window.location.href;return}tapDownTime="";tapDownFirst=true;$(".index").css("display","block");$("#report").css("display","none");$(".rightWordNumber2").html("0");$("#cet4,#cet6").unbind("tapone");$("#cet4,#cet6").bind("tapone click",function(q){$(".index").css("display","none");$(".mycontainer").css("display","block");$(".rightWordNumber2").html("0");if(examType!=this.id){examType=this.id;if(examType=="cet4"){topic_objs=cet4Word;examDesc="四级"}else{topic_objs=cet6Word;examDesc="六级"}}sendStatAjaxRequest(opname,"startgame"+examType);var p="http://baicizhan.qiniucdn.com/games/worddown/img/result/"+examType+".png";$("#topbarImg").attr("src",p);var o=q||window.event;o.preventDefault();o.stopPropagation();m.replay();$("#cet4,#cet6").unbind()});$("#replay").unbind()})},checkResult:function(){this.removeCurWordAudio();$(document).unbind("keydown");$(".option").unbind("click");$(".option").unbind("tapone");$(".option").unbind("touchstart");var j=this;if(typeof(j.curWord)=="undefined"){return}var f=j.curWord.getPosition();var h=false;var c="";for(var d in j.widgetList){var g=j.widgetList[d].getPosition();if(g.x==f.x&&g.y==f.y){c=j.widgetList[d];if(j.widgetList[d].isAnswer){h=true}}}var k=[];j.widgetList.forEach(function(i){if(i.getPosition().y==f.y){k.push(i)}});var b=new Date();var a=b.getTime()-j.curTopicStartTime;var a=parseInt(a/1000);var e={};e.topicId=j.curTopic.topicId;e.answer=[{order:0,answer:c.content,result:h}];e.usedTime=a;e.submitted=true;e.result=h;if(h){e.accuracy=100;j.checkResultRight(c,k)}else{e.accuracy=0;j.checkResultWrong(c,k)}j.DoneWordList.push(e);j.showLatestWord(j.curTopic);j.checkNeedLoadDatas()},removeCurWordAudio:function(){$("#"+this.curTopic.topicId).attr("played",true)},showLatestWord:function(b){var c=$(".latest-topic");c.html("");var a=b.topicContent.word;var d=b.topicContent.wordMean;c.append(a+" = "+d)},checkNeedLoadDatas:function(){var a=this;if(a.topics.length<=5){var c={};if(wordListNum==0){console.log("没有更多单词啦")}else{var b="http://baicizhan.qiniucdn.com/games/data/"+examType+"_"+wordListNum+".json";$.getJSON(b,function(d){setNewDatas(d);wordListNum--;console.log("从服务器上取到值啦")})}}else{console.log("当前不需要跟多数据")}},getTopY:function(){var a=this;var b=rows;this.widgetList.forEach(function(c){if(c.getPosition().y<b){b=c.getPosition().y}});return b},checkGameOver:function(){if(this.wrongTopic.length==rows-1){return true}else{return false}},getElement:function(){return $("#"+this.id)},setLevel:function(d){var a=this;a.curLevel=d;window.clearInterval(a.timerId);var c=$(".level-btn");for(var b=0;b<c.length;b++){$(c[b]).find("img").attr("src","resources/"+a.levelsDesc[b]+".png");if(b==parseInt(d)){$(c[b]).find("img").attr("src","resources/"+a.levelsDesc[b]+"hover.png")}}a.timerId=setInterval(function(){if(typeof(a.curWord)=="undefined"){return}var e=a.curWord.getPosition();if(e.y==rows-1){a.checkResult()}else{a.curWord.setPosition(e.x,e.y+1);a.curWord.showContent()}},a.timerIntvl-(d*100))},pause:function(){var a=this;a.gameStatus="pause";window.clearInterval(a.timerId);a.changePauseBtnStyle("pause-controller-pause")},resume:function(){var a=this;a.setLevel(a.curLevel);a.gameStatus="playing";a.changePauseBtnStyle("pause-controller")},clearInterval:function(){var a=this;window.clearInterval(a.timerId);a.timerId=""},verticalMiddle:function(){$(".content").each(function(){var a=$(this).parent("span")[0].offsetHeight;var c=$(this)[0].offsetHeight;var b=(a-c)/2;$(this).css("margin-top",b+"px")})},setWordPosition:function(a,b){this.curWord.setPosition(a,b);this.curWord.removeClickEvent()}};var gameContainer={};$("#cet4,#cet6").bind("touchstart",function(){var a="http://baicizhan.qiniucdn.com/games/worddown/img/btn/"+this.id+"_checked.png";$("#"+this.id).attr("src",a)});$("#cet4,#cet6").bind("touchend",function(){var a="http://baicizhan.qiniucdn.com/games/worddown/img/index/"+this.id+".png";$("#"+this.id).attr("src",a)});$("#replay,#invite").bind("touchstart",function(){var a="http://baicizhan.qiniucdn.com/games/worddown/img/btn/"+this.id+"2.png";$("#"+this.id).attr("src",a)});$("#replay,#invite").bind("touchend",function(){var a="http://baicizhan.qiniucdn.com/games/worddown/img/btn/"+this.id+".png";$("#"+this.id).attr("src",a)});$("#invite").bind("tapone",function(){sendStatAjaxRequest(opname,"shareclick"+examType);$("#cover").css("display","block")});$("#cover").bind("tapone",function(){$("#cover").css("display","none")});$("#cet4,#cet6").bind("tapone",function(){var l=this;$(".index").css("display","none");$(".mycontainer").css("display","block");examType=this.id;var e="http://baicizhan.qiniucdn.com/games/worddown/img/result/"+examType+".png?1212";$("#topbarImg").attr("src",e);topicType=TopParent.callTop("get_topic_type","");var b="";if(examType=="cet4"){topic_objs=cet4Word;examDesc="四级"}else{topic_objs=cet6Word;examDesc="六级"}sendStatAjaxRequest(opname,"startgame"+examType);var a=topic_objs.length;for(var g in topic_objs){var k=topic_objs[g];if(k.topicContent.optionMean1==""){var c=[];if(a-1<3){c=[0,0]}else{var f=[];f.push(parseInt(g));c=gen_random_serials(0,a-1,2,f)}k.topicContent.optionMean1=topic_objs[c[0]].topicContent.wordMean;k.topicContent.optionMean2=topic_objs[c[1]].topicContent.wordMean}topic_objs[g]=k}var j=topic_objs.reverse();var d=[];for(var g=0;g<120;g++){if(j.length!=0){d.push(j.pop())}}var h=gen_random_serials(0,d.length,d.length,[]);for(var g in h){j.push(d[h[g]])}gameContainer=new GameContainer("game-container",j);ElementFocus("game-container");if(document.cookie==""){$("#teach").css("display","block");$("audio")[0].pause();gameContainer.pause()}else{setInterval(timeIncrease,1000)}document.cookie="playAlready=true";$("#teach").bind("tapone",function(){sendStatAjaxRequest(opname,"guideclick"+examType);setTimeout("$('#teach').fadeOut();",500);gameContainer.resume();$("audio")[0].play();setInterval(timeIncrease,1000)})});$(".optionDiv").bind("tapone",function(b){var a=$(".option").length;if(this.id=="opDiv1"){$(".option")[a-3].click()}else{if(this.id=="opDiv2"){$(".option")[a-2].click()}else{$(".option")[a-1].click()}}});$(".downloadTip img").click(function(){sendStatAjaxRequest(opname,"download"+examType);var a=navigator.userAgent;if(a.indexOf("Android")>-1||a.indexOf("Linux")>-1){download_android()}else{if(a.indexOf("iPhone")>-1){download_ios()}}});function download_android(){window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.jiongji.andriod.card"}function download_ios(){window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.jiongji.andriod.card&g_f=991653"}var ElementFocus=function(a){try{window.parent.$("iframe").focus();$("#"+a).focus()}catch(b){console.log("Element Focus error",b.toString())}};function timeIncrease(){if($(".pause-controller-pause").length>0){return}var a=$(".rightWordNumber2").html();a++;$(".rightWordNumber2").html(a)}var setNewDatas=function(a){var c={};try{c=a}catch(n){console.log("parse topics error!",n.toString())}if(c!={}){var o=[];var r=[];var b=[];for(var l in gameContainer.DoneWordList){b.push(gameContainer.DoneWordList[l].topicId)}for(var l in gameContainer.topics){r.push(gameContainer.topics[l].topicId)}var p=[];c.forEach(function(e){p.push(e)});var m=p.length-1;while(c.length!=0){var s=c.pop();if(r.indexOf(s.topicId)==-1&&b.indexOf(s.topicId)==-1){var h=[0,0];if(p.length>=3){h=gen_random_serials(0,p.length-1,2,[parseInt(m)])}s.topicContent.optionMean1=p[h[0]].topicContent.wordMean;s.topicContent.optionMean2=p[h[1]].topicContent.wordMean;o.push(s)}m-=1}var g=o;for(var l in gameContainer.topics){g.push(gameContainer.topics[l])}var q=[];for(var l=0;l<120;l++){if(g.length!=0){q.push(g.pop())}}var k=gen_random_serials(0,q.length,q.length,[]);var j=q.length;for(var l in k){var f=q[k[l]];if(f.topicContent.optionMean1==""){var d=[0,0];if(j>=3){d=gen_random_serials(0,j-1,2,[k[l]])}f.topicContent.optionMean1=q[d[0]].topicContent.wordMean;f.topicContent.optionMean2=q[d[1]].topicContent.wordMean}g.push(f)}gameContainer.topics=g}else{alert("当前没有更多单词!")}};var rows=20;var extend=function(b,a){var c=function(){};c.prototype=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.uber=a.prototype};var StaticLabel=function(a,b){this.init(a,b)};StaticLabel.prototype={type:"static-label",maxId:0,init:function(a){this.container=a;this.id=this.genAutoId();this.appendElement()},afterInit:function(){var a=this.container.getElement().width()/3;var b=this.container.getElement().height()/rows;this.getElement().css({height:b,width:a})},genAutoId:function(){return this.type+"-"+StaticLabel.prototype.maxId++},removeElement:function(){this.getElement().remove()},getElement:function(){return $("#"+this.id)},setContent:function(a){this.content=a;this.getElement().html("<span class='content'>"+this.content+"</span> ")},hideContent:function(){},showContent:function(){this.getElement().children().css("visibility","visible")},setPosition:function(a,d){var b=this.container.getElement().width()/3;var c=this.container.getElement().height()/rows;this.getElement().css("left",a*b);this.getElement().css("top",d*c)},getPosition:function(){var b=this.container.getElement().width()/3;var e=this.container.getElement().height()/rows;var d=this.getElement().css("left");var c=this.getElement().css("top");d=d.substr(0,d.length-2);c=c.substr(0,c.length-2);if(d=="au"){d="0"}if(c=="au"){c="0"}var a={x:Math.round(parseInt(d)/b),y:Math.round(parseInt(c)/e)};return a},appendElement:function(){var a=this.genHtml();this.container.getElement().append(a)}};var Word=function(a,b){this.init(a,b);this.afterInit()};extend(Word,StaticLabel);$.extend(Word.prototype,{type:"word",init:function(a,b){this.container=a;this.id=this.genAutoId();this.topicId=b;this.appendElement()},genHtml:function(){var a="<span id='"+this.id+"' class='word'></span>";return a},appendElement:function(){var a=this;var b=this.genHtml();this.container.getElement().append(b);this.getElement().bind("click",function(d){var c=d||window.event;c.preventDefault();c.stopPropagation();a.showContent();preloadAllAudio();$("#"+a.topicId).trigger("play")})},removeClickEvent:function(){this.getElement().unbind("click")}});var Option=function(a){this.init(a);this.afterInit();this.isAnswer=false};extend(Option,StaticLabel);$.extend(Option.prototype,{type:"option",setAnser:function(a){this.isAnswer=a},genHtml:function(){var a="<span id='"+this.id+"' class='option'></span>";return a},wrongHtml:function(){this.getElement().addClass("selected-wrong-top")},getPosition:function(){var b=this.container.getElement().width()/3;var e=this.container.getElement().height()/rows;var d=this.getElement().css("left");var c=this.getElement().css("top");d=d.substr(0,d.length-2);c=c.substr(0,c.length-2);if(d=="au"){d="0"}if(c=="au"){c="0"}var a={x:Math.round(parseInt(d)/b),y:Math.round(parseInt(c)/e)};return a},selected:function(){},setContent:function(b){var a=this;this.content=b;this.getElement().html("<span class='content'>"+this.content+"</span> ");setTimeout(function(){a.bindClickEvent()},500)},bindClickEvent:function(){var a=this;this.getElement().bind("tapone click",function(d){var c=d||window.event;c.stopPropagation();c.preventDefault();var b=a.getPosition().x;a.container.setWordPosition(b,rows-1);a.container.checkResult();if(a.container.gameStatus=="pause"){a.container.resume()}preloadAllAudio();$(this).unbind("tapone click")})}});$(function(){sendStatAjaxRequest(opname,"");$.ajax({type:"get",url:"/api/weixin/jssdk/config.json",data:{share_url:window.location.href},dataType:"json",success:function(b){var a=b;wx.config({debug:false,appId:"wxcfbbac84baa7a51b",timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]})}});wx.ready(function(){wx.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]});var a={title:document.title,link:window.location.href,imgUrl:"http://baicizhan.qiniucdn.com/games/worddown/img/title300.jpg?12312",success:function(){sendStatAjaxRequest(opname,"WeixinShareSuccess")},cancel:function(){sendStatAjaxRequest(opname,"WeixinShareCancel")}};wx.onMenuShareTimeline(a);a.desc="用百词斩突击单词，分数涨涨涨！";wx.onMenuShareAppMessage(a)})});